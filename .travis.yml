# DO NOT EDIT: This file is autogenerated by running the following command:
# tools/haskell-travis hs-toxcore/.haskell-travis.yml hs-toxcore/.travis.yml
---
addons:
  apt:
    packages:
    - alex-3.1.7
    - happy-1.19.5
    - cabal-install-1.18
    - ghc-7.8.4
    - libsodium-dev
    sources:
    - hvr-ghc
    - sourceline: ppa:chris-lea/libsodium
after_script:
- hpc-coveralls $PACKAGE_NAME-$PACKAGE_VERSION
branches:
  only:
  - master
cache:
  directories:
  - $HOME/.cabal-build
  - $HOME/.cabal-tools
  - $HOME/.ghc-build
  - $HOME/.ghc-tools
env: CABALVER=1.18 GHCVER=7.8.4
install:
- PACKAGE_NAME='hstox'
- PACKAGE_VERSION='0.0.1'
- export PATH=$HOME/.cabal-build/bin:$HOME/.cabal-tools/bin:/opt/ghc/$GHCVER/bin:/opt/cabal/$CABALVER/bin:/opt/alex/3.1.7/bin:/opt/happy/1.19.5/bin:$PATH
- rm -rf $HOME/.cabal $HOME/.ghc
- mkdir -p $HOME/.cabal-tools $HOME/.ghc-tools
- rm -f $HOME/.cabal && ln -s $HOME/.cabal-tools $HOME/.cabal
- rm -f $HOME/.ghc && ln -s $HOME/.ghc-tools $HOME/.ghc
- cabal update
- mkdir -p $HOME/.cabal-build $HOME/.ghc-build
- rm -f $HOME/.cabal && ln -s $HOME/.cabal-build $HOME/.cabal
- rm -f $HOME/.ghc && ln -s $HOME/.ghc-build $HOME/.ghc
- cabal update
language: generic
script:
- CABAL_PACKAGES='semdoc'
- rm -f $HOME/.cabal && ln -s $HOME/.cabal-tools $HOME/.cabal
- rm -f $HOME/.ghc && ln -s $HOME/.ghc-tools $HOME/.ghc
- cabal install hpc-coveralls stylish-haskell hlint aeson-0.9.0.1
- curl https://raw.githubusercontent.com/TokTok/toktok-stack/master/tools/stylish-haskell-lhs
  -o $HOME/.cabal/bin/stylish-haskell-lhs
- chmod +x $HOME/.cabal/bin/stylish-haskell-lhs
- hlint .
- stylish-haskell-lhs -i .
- git diff
- rm -f $HOME/.cabal && ln -s $HOME/.cabal-build $HOME/.cabal
- rm -f $HOME/.ghc && ln -s $HOME/.ghc-build $HOME/.ghc
- cabal install --enable-tests --enable-benchmarks --only-dependencies ./ $CABAL_PACKAGES
- cabal install $CABAL_PACKAGES
- cabal configure --enable-tests --enable-benchmarks --enable-library-coverage
- cabal test
- cabal check
- semdoc src/tox/Network/Tox.lhs spec.md
sudo: required
